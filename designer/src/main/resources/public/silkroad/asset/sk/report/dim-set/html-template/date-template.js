define(["template"],function(a){function b(b){"use strict";b=b||{};var c=a.utils,d=(c.$helpers,c.$each),e=b.dim,f=(b.$cube,b.i,c.$escape),g=b.cubes,h=b.dateRelationTables,i=(b.$dateRelationTable,b.j,b.$dim,b.$index,b.defaultDate),j=(b.$level,b.$format,b.$field,"");return j+='<div class="dim-container-date hide j-date-main">\r\n    <ul class="date-column-names c-f">\r\n        <li class="date-column-names-main-table"><span>主数据表</span></li>\r\n        <li class="date-column-names-setting"><span>配置区</span></li>\r\n    </ul>\r\n    <!--循环cube列表（dim.normal）-->\r\n    ',d(e.date,function(a){j+='\r\n    <div class="date-main-box c-f j-date-main-box">\r\n        <span class="cube-name" cubeId=',j+=f(a.cubeId),j+=" title=",j+=f(g[a.cubeId].name),j+=">",j+=f(g[a.cubeId].name),j+='</span>\r\n        <span class="straight-line"></span>\r\n        ',"0"===a.children[0].relationTable||"ownertable"===a.children[0].relationTable?(j+='\r\n        <!--内置维度-->\r\n        <div class="date-relation-owner">\r\n            <div class="date-relation-owner-first-part c-f">\r\n                <span>选择被关联表：</span>\r\n                <select class="j-relation-table-select">\r\n                    <option value="0">请选择</option>\r\n                    <option value="ownertable"\r\n                    ',"ownertable"===a.children[0].relationTable&&(j+='\r\n                    selected = "selected"'),j+=">内置表</option>\r\n                    ",d(h,function(a){j+="\r\n                    <option value=",j+=f(a.name),j+=">",j+=f(a.comment),j+="</option>\r\n                    "}),j+='\r\n                </select>\r\n            </div>\r\n            <div class="date-relation-owner-two-part c-f j-date-two-part">\r\n                <span>选择时间字段：</span>\r\n                <select>\r\n                    <option value="0">请选择</option>\r\n                    ',d(g[a.cubeId].currDims,function(b){j+="\r\n                    <option value=",j+=f(b.name),j+="\r\n                    ",b.name===a.children[0].currDim&&(j+='selected="selected"\r\n                    '),j+=">",j+=f(b.comment),j+="\r\n                    </option>\r\n                    "}),j+='\r\n                </select>\r\n                <span>粒度：</span>\r\n                <select class="j-owner-date-level-select">\r\n                    <option value="0">请选择</option>\r\n                    ',d(i.level,function(b){j+="\r\n                    <option value=",j+=f(b.id),j+="\r\n                    ",b.id===a.children[0].field&&(j+='selected="selected"\r\n                    '),j+=">",j+=f(b.name),j+="\r\n                    </option>\r\n                    "}),j+='\r\n                </select>\r\n                <span>时间格式：</span>\r\n                <select class="j-owner-date-type-select">\r\n                    <option value="0">请选择</option>\r\n                    ',d(i.level,function(b){j+="\r\n                    ",b.id===a.children[0].field&&(j+="\r\n                    ",d(i.dateFormatOptions[a.children[0].field],function(b){j+="\r\n                    <option value=",j+=f(b),j+="\r\n                    ",b===a.children[0].format&&(j+='selected="selected"\r\n                    '),j+=">",j+=f(b),j+="</option>\r\n                    "}),j+="\r\n                    "),j+="\r\n                    "}),j+="\r\n                </select>\r\n            </div>\r\n        </div>\r\n        "):(j+='\r\n        <!--普通维度-->\r\n        <div class="date-relation-normal">\r\n            <div class="first-part c-f">\r\n                <span>选择被关联表：</span>\r\n                <!--内置表为0-->\r\n                <select class="j-relation-table-select">\r\n                    <option value="0">请选择</option>\r\n                    <option value="ownertable"\r\n                    ',"ownertable"===a.children[0].relationTable&&(j+='\r\n                    selected = "selected"'),j+=">内置表</option>\r\n                    ",d(h,function(b){j+="\r\n                    <option value=",j+=f(b.id),j+="\r\n                    ",b.id===a.children[0].relationTable&&(j+='\r\n                    selected = "selected"\r\n                    '),j+=">",j+=f(b.name),j+="</option>\r\n                    "}),j+='\r\n                </select>\r\n            </div>\r\n            <div class="date-relation-normal-two-part c-f j-date-two-part">\r\n                <span>指定关联字段：</span>\r\n                <select>\r\n                    <option value="0">请选择</option>\r\n                    ',d(g[a.cubeId].currDims,function(b){j+="\r\n                    <option value=",j+=f(b.id),j+="\r\n                    ",b.id===a.children[0].currDim&&(j+='selected="selected"\r\n                    '),j+=">",j+=f(b.name),j+="\r\n                    </option>\r\n                    "}),j+='\r\n                </select>\r\n                <span class="equal">=</span>\r\n\r\n                <select>\r\n                    <option value="0">请选择</option>\r\n                    ',d(h,function(b){j+="\r\n                    ",b.id===a.children[0].relationTable&&(j+="\r\n                    ",d(b.fields,function(b){j+="\r\n                    <option value=",j+=f(b.id),j+="\r\n                    ",b.id===a.children[0].field&&(j+='selected="selected"\r\n                    '),j+=">",j+=f(b.name),j+="\r\n                    </option>\r\n                    "}),j+="\r\n                    "),j+="\r\n                    "}),j+='\r\n                </select>\r\n            </div>\r\n            <!--需要去后台获取-->\r\n            <div class="date-relation-normal-three-part j-date-three-part">\r\n                <span class="date-relation-normal-three-part-name">日期格式：</span>\r\n                <div class="date-relation-normal-three-part-box c-f">\r\n                    ',d(h,function(b){j+="\r\n                    ",b.id===a.children[0].relationTable&&(j+="\r\n                    ",d(b.fields,function(c){j+='\r\n                    <div class="date-relation-normal-three-part-box-date-format c-f">\r\n                        <span>',j+=f(c.name),j+='</span>\r\n                        <select>\r\n                            <option value="0">请选择</option>\r\n                            ',d(b.dateFormatOptions[c.id],function(b){j+='\r\n                            <option value="',j+=f(b),j+='" ',b===a.children[0].dateLevel[c.id]&&(j+=' selected="selected" '),j+=">",j+=f(b),j+="\r\n                            </option>\r\n                            "}),j+="\r\n                        </select>\r\n                    </div>\r\n                    "}),j+="\r\n                    "),j+="\r\n                    "}),j+="\r\n                </div>\r\n            </div>\r\n        </div>\r\n        "),j+='\r\n        <span class="date-error-msg j-date-error-msg hide"></span>\r\n    </div>\r\n   '}),j+="\r\n</div>\r\n\r\n"}return{render:b}});